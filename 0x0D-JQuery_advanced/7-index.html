<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 7</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  </head>
  <body>
    <script type="application/javascript">
      function createSearchForm(){
        $('body').append('<input type="text">');
        $('body').append('<input id="sub" type="submit">');
        $('#sub').click(function(){
          queryWikipedia(input);
        });
        $('body').append('<ul></ul>');
      };

      function addNewArticle (id, title, snippet){
        $('ul').append('<li><li>');
        $('li').append('<p><span class="sp"></span></p>');
        $('.sp').first().append(id + '-' + '<b>title</b>');

        $('li').append('<p></p>');
        $('p').last().append(snippet);

      };

      function queryWikipedia(search){
        let url = 'https://en.wikipedia.org/w/api.php';
        let p = {
          action: 'query',
          list: 'search',
          srsearch: search,
          format: 'json'
        };

        url = url + "?origin=*";
        Object.keys(params).forEach(function(key){url += "&" + key + "=" + params[key];});

        $.get(url, function(data){
          data.query.search.forEach(trav =>{addNewArticle(trav.pageid, trav.title, trav.snippet);});
        });
      };

      createSearchForm();
    </script>
  </body>
</html>
